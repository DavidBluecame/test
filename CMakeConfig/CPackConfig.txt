if(NOT YAF_DOC_DIR)
    if(NOT WIN32)
        set(YAF_DOC_DIR share/doc/yafaray)
    else(NOT WIN32)
        set(YAF_DOC_DIR share/doc/yafaray)
    endif(NOT WIN32)
endif(NOT YAF_DOC_DIR)

if(NOT YAF_TESTS_DIR)
    if(NOT WIN32)
        set(YAF_TESTS_DIR share/yafaray/tests)
    else(NOT WIN32)
        set(YAF_TESTS_DIR share/yafaray/tests)
    endif(NOT WIN32)
endif(NOT YAF_TESTS_DIR)

if(NOT YAF_INCL_DIR)
    if(NOT WIN32)
        set(YAF_INCL_DIR include/yafaray)
    else(NOT WIN32)
        set(YAF_INCL_DIR include/yafaray)
    endif(NOT WIN32)
endif(NOT YAF_INCL_DIR)

if (BLENDER_ADDON)
    if (BLENDER_EXPORTER_PATH)
        message("** Blender-Exporter Add-On building enabled.")
        set(YAF_BIN_DIR bin)
        set(YAF_LIB_DIR bin)
        set(YAF_PLUGIN_DIR ${YAF_LIB_DIR}/yafaray-plugins)
        set(YAF_BINDINGS_PY_DIR bin)

        if(NOT YAFARAY_BLENDER_EXPORTER_VERSION)
            if(GIT_FOUND)
                execute_process(COMMAND ${GIT_EXECUTABLE} describe --dirty --always --tags WORKING_DIRECTORY "${BLENDER_EXPORTER_PATH}" OUTPUT_VARIABLE YAFARAY_BLENDER_EXPORTER_VERSION OUTPUT_STRIP_TRAILING_WHITESPACE)
            endif(GIT_FOUND)
            if(NOT YAFARAY_BLENDER_EXPORTER_VERSION)
                set(YAFARAY_BLENDER_EXPORTER_VERSION "devel")
            endif(NOT YAFARAY_BLENDER_EXPORTER_VERSION)
        endif(NOT YAFARAY_BLENDER_EXPORTER_VERSION)
        
        install(DIRECTORY ${BLENDER_EXPORTER_PATH}/ DESTINATION . PATTERN ".git*" EXCLUDE REGEX "${BLENDER_EXPORTER_PATH}/__init__.py" EXCLUDE)
        configure_file(${BLENDER_EXPORTER_PATH}/__init__.py ${CMAKE_INSTALL_PREFIX}/__init__.py)
        
        set(YAF_TESTS_DIR tests)
        install(DIRECTORY ${BLENDER_EXPORTER_PATH}/tests/ DESTINATION ${CMAKE_INSTALL_PREFIX}/${YAF_TESTS_DIR})

        set(CPACK_GENERATOR "ZIP")
        set(CPACK_PACKAGE_INSTALL_DIRECTORY "yafaray")
        set(CPACK_PACKAGE_FILE_NAME "yafaray")

    else (BLENDER_EXPORTER_PATH)
        message("!! WARNING: Blender-Exporter source code path not found, disabling Blender Add-On generation. To enable the Blender Add-On, download the current Blender-Exporter with 'git clone git://github.com/YafaRay/Blender-Exporter <path_to_blender_exporter>' and add 'set(BLENDER_EXPORTER_PATH, \"<path_to_blender_exporter>\")' in the file UserConfig.txt")

        install(FILES ${CMAKE_SOURCE_DIR}/AUTHORS DESTINATION ${CMAKE_INSTALL_PREFIX}/${YAF_DOC_DIR})
        install(FILES ${CMAKE_SOURCE_DIR}/CHANGELOG DESTINATION ${CMAKE_INSTALL_PREFIX}/${YAF_DOC_DIR})
        install(FILES ${CMAKE_SOURCE_DIR}/LICENSES DESTINATION ${CMAKE_INSTALL_PREFIX}/${YAF_DOC_DIR})
        install(FILES ${CMAKE_SOURCE_DIR}/README.md DESTINATION ${CMAKE_INSTALL_PREFIX}/${YAF_DOC_DIR})
        install(DIRECTORY ${CMAKE_SOURCE_DIR}/tests/ DESTINATION ${CMAKE_INSTALL_PREFIX}/${YAF_TESTS_DIR})
		install(DIRECTORY ${CMAKE_SOURCE_DIR}/include/ DESTINATION ${CMAKE_INSTALL_PREFIX}/${YAF_INCL_DIR})
		install(FILES ${CMAKE_BINARY_DIR}/yaf_version.h DESTINATION ${CMAKE_INSTALL_PREFIX}/${YAF_INCL_DIR})
		install(FILES ${CMAKE_BINARY_DIR}/yafray_config.h DESTINATION ${CMAKE_INSTALL_PREFIX}/${YAF_INCL_DIR})
    endif (BLENDER_EXPORTER_PATH)
else (BLENDER_ADDON)
    install(FILES ${CMAKE_SOURCE_DIR}/AUTHORS DESTINATION ${CMAKE_INSTALL_PREFIX}/${YAF_DOC_DIR})
    install(FILES ${CMAKE_SOURCE_DIR}/CHANGELOG DESTINATION ${CMAKE_INSTALL_PREFIX}/${YAF_DOC_DIR})
    install(FILES ${CMAKE_SOURCE_DIR}/LICENSES DESTINATION ${CMAKE_INSTALL_PREFIX}/${YAF_DOC_DIR})
    install(FILES ${CMAKE_SOURCE_DIR}/README.md DESTINATION ${CMAKE_INSTALL_PREFIX}/${YAF_DOC_DIR})
    install(DIRECTORY ${CMAKE_SOURCE_DIR}/tests/ DESTINATION ${CMAKE_INSTALL_PREFIX}/${YAF_TESTS_DIR})
    install(DIRECTORY ${CMAKE_SOURCE_DIR}/include/ DESTINATION ${CMAKE_INSTALL_PREFIX}/${YAF_INCL_DIR})
    install(FILES ${CMAKE_BINARY_DIR}/yaf_version.h DESTINATION ${CMAKE_INSTALL_PREFIX}/${YAF_INCL_DIR})
    install(FILES ${CMAKE_BINARY_DIR}/yafray_config.h DESTINATION ${CMAKE_INSTALL_PREFIX}/${YAF_INCL_DIR})
endif (BLENDER_ADDON)

